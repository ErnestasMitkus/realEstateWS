<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:camel="http://camel.apache.org/schema/spring"
       xmlns:cxf="http://camel.apache.org/schema/cxf"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                           http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
                           http://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd">

    <bean id="realEstateDatabase" class="com.mist.rews.db.TextFileRealEstateDatabase"/>

    <!-- Services -->
    <bean id="registerRealEstateService" class="com.mist.rews.op.services.RegisterRealEstateService">
        <constructor-arg ref="realEstateDatabase"/>
    </bean>
    <bean id="transferRealEstateService" class="com.mist.rews.op.services.TransferRealEstateService">
        <constructor-arg ref="realEstateDatabase"/>
    </bean>
    <bean id="unregisterRealEstateService" class="com.mist.rews.op.services.UnregisterRealEstateService">
        <constructor-arg ref="realEstateDatabase"/>
    </bean>


    <!-- Route Builders -->
    <bean id="realEstateRouteBuilder" class="com.mist.rews.op.RealEstateRouteBuilder"/>

    <camel:camelContext id="camel-rews-op" xmlns="http://camel.apache.org/schema/spring">
        <routeBuilder ref="realEstateRouteBuilder"/>
    </camel:camelContext>

    <cxf:cxfEndpoint xmlns:s="urn:com:mist:rews:services:wsdl:RealEstateService"
                     id="reInMediatorEndpoint"
                     address="/RealEstateService"
                     endpointName="s:AuthRealEstateSOAP"
                     serviceName="s:AuthRealEstateService"
                     wsdlURL="wsdl/real-estate.1.0.wsdl"
            >
        <!--<cxf:features>-->
            <!--&lt;!&ndash; Enables logging of SOAP messages. &ndash;&gt;-->
            <!--&lt;!&ndash;<wsa:addressing xmlns:wsa="http://cxf.apache.org/ws/addressing" addressingRequired="false"/>&ndash;&gt;-->
            <!--<bean class="org.apache.cxf.feature.LoggingFeature">-->
                <!--<property name="prettyLogging" value="true"/>-->
            <!--</bean>-->
        <!--</cxf:features>-->
        <cxf:inInterceptors>
            <bean class="org.apache.cxf.transport.common.gzip.GZIPInInterceptor"/>
        </cxf:inInterceptors>
        <cxf:properties>
            <entry key="dataFormat" value="PAYLOAD"/>
        </cxf:properties>
    </cxf:cxfEndpoint>

</beans>